<div class="card">
  <!-- 登录状态提示 -->
  <div id="sync-login-notice" class="sync-login-notice" style="display: none;">
    <div class="notice-content">
      <i class="fas fa-info-circle notice-icon"></i>
      <div class="notice-text">
        <h5>需要登录才能使用数据同步功能</h5>
        <p>请在左侧账号信息区域登录您的 JavDB 账号</p>
      </div>
    </div>
  </div>

  <!-- 数据同步区域 -->
  <div id="data-sync-section-main" class="data-sync-section">
    <h3 class="section-title">数据同步</h3>
    
    <!-- 功能说明提示 -->
    <div class="sync-info-notice">
      <i class="fas fa-info-circle"></i>
      <span>从 JavDB 同步您的观看记录和想看列表到本地。<strong>仅首次使用或数据丢失时需要</strong>，日常使用请通过 WebDAV 云端同步保持数据一致。</span>
    </div>

    <!-- 使用提示 -->
    <div class="sync-usage-notice">
      <div class="notice-content">
        <i class="fas fa-exclamation-triangle notice-icon"></i>
        <div class="notice-text">
          <h5>⚠️ 重要提示</h5>
          <ul class="notice-list">
            <li><strong>适用场景：</strong>首次安装扩展、更换设备、或本地数据丢失时使用</li>
            <li><strong>请勿频繁使用：</strong>同步会对源站服务器产生较大压力，建议仅在必要时使用</li>
            <li><strong>日常数据同步：</strong>完成首次同步后，请使用"设置 → WebDAV 同步"功能保持多设备数据一致</li>
            <li><strong>注意事项：</strong>过度请求可能导致 IP 被限制或账号异常，请合理使用</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 同步选项 -->
    <div class="sync-options-grid">
      <div class="sync-option-card" style="--card-index: 0">
        <div class="sync-option-header">
          <i class="fas fa-sync-alt sync-option-icon"></i>
          <h5>同步全部数据</h5>
        </div>
        <p class="sync-option-description">同步所有观看记录和想看列表到本地</p>
        <div class="sync-option-actions">
          <button id="syncAllData" class="sync-btn sync-btn-primary" data-sync-type="all">
            <i class="fas fa-sync-alt"></i>
            <span>开始同步</span>
          </button>
        </div>
        <div class="sync-option-stats">
          <span class="stat-item">已观看 + 想看</span>
        </div>
      </div>

      <div class="sync-option-card" style="--card-index: 1">
        <div class="sync-option-header">
          <i class="fas fa-heart sync-option-icon"></i>
          <h5>同步想看列表</h5>
        </div>
        <p class="sync-option-description">仅同步想看列表中的视频</p>
        <div class="sync-option-actions">
          <button id="syncWantData" class="sync-btn sync-btn-secondary" data-sync-type="want">
            <i class="fas fa-heart"></i>
            <span>同步想看</span>
          </button>
        </div>
        <div class="sync-option-stats">
          <span class="stat-item">想看列表</span>
        </div>
      </div>

      <div class="sync-option-card" style="--card-index: 2">
        <div class="sync-option-header">
          <i class="fas fa-eye sync-option-icon"></i>
          <h5>同步观看记录</h5>
        </div>
        <p class="sync-option-description">仅同步已观看的视频记录</p>
        <div class="sync-option-actions">
          <button id="syncWatchedData" class="sync-btn sync-btn-secondary" data-sync-type="watched">
            <i class="fas fa-eye"></i>
            <span>同步已看</span>
          </button>
        </div>
        <div class="sync-option-stats">
          <span class="stat-item">观看记录</span>
        </div>
      </div>

      <div class="sync-option-card" style="--card-index: 3">
        <div class="sync-option-header">
          <i class="fas fa-users sync-option-icon"></i>
          <h5>同步收藏演员</h5>
        </div>
        <p class="sync-option-description">同步您收藏的演员信息到本地演员库</p>
        <div class="sync-option-actions">
          <button id="syncActorsData" class="sync-btn sync-btn-secondary" data-sync-type="actors">
            <i class="fas fa-users"></i>
            <span>同步演员基本信息</span>
            <small class="sync-btn-note">快速同步，不包含性别</small>
          </button>
          <button id="syncActorsGender" class="sync-btn sync-btn-tertiary" data-sync-type="actors-gender">
            <i class="fas fa-venus-mars"></i>
            <span>更新演员性别</span>
            <small class="sync-btn-note">需要额外时间</small>
          </button>
        </div>
        <div class="sync-option-stats">
          <span class="stat-item">收藏演员</span>
          <span class="stat-item" id="actorGenderStats">性别待更新</span>
        </div>
      </div>
    </div>

    <!-- 同步进度 -->
    <div id="syncProgress" class="sync-progress-container" style="display: none;">
      <div class="progress-section">
        <h5>同步进度</h5>

        <!-- 页面获取进度 -->
        <div class="progress-stage" id="pagesProgress" style="display: none;">
          <div class="progress-header">
            <div class="progress-label">获取列表页面</div>
            <div class="progress-percentage" id="pagesProgressPercentage">0%</div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="pagesProgressFill"></div>
          </div>
          <span class="progress-text" id="pagesProgressText">准备获取...</span>
        </div>

        <!-- 详情获取进度 -->
        <div class="progress-stage" id="detailsProgress" style="display: none;">
          <div class="progress-header">
            <div class="progress-label">获取视频详情</div>
            <div class="progress-percentage" id="detailsProgressPercentage">0%</div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="detailsProgressFill"></div>
          </div>
          <span class="progress-text" id="detailsProgressText">等待开始...</span>
          
          <!-- 已获取影片列表 -->
          <div class="fetched-videos-container" id="fetchedVideosContainer" style="display: none;">
            <div class="fetched-videos-header">已获取影片</div>
            <div class="fetched-videos-list" id="fetchedVideosList">
              <!-- 动态添加影片项 -->
            </div>
          </div>
        </div>

        <!-- 取消按钮 -->
        <div class="progress-controls">
          <button class="cancel-sync-btn" id="cancelSyncBtn" title="取消同步">
            <i class="fas fa-times"></i> 取消同步
          </button>
        </div>
      </div>
    </div>

    <!-- 同步结果 -->
    <div id="syncResult" class="sync-result" style="display: none;">
      <i class="fas fa-check-circle"></i>
      <span>同步完成</span>
    </div>
  </div>
</div>
