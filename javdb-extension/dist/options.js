/*! For license information please see options.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,r){return chrome.storage.local.set((n={},u=r,(o=function(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}(o=e))in n?Object.defineProperty(n,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):n[o]=u,n));var n,o,u}function r(t,e){return new Promise(function(r){chrome.storage.local.get([t],function(n){r(void 0!==n[t]?n[t]:e)})})}function n(){var t,e,r="function"==typeof Symbol?Symbol:{},u=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,u,a){var i=n&&n.prototype instanceof f?n:f,s=Object.create(i.prototype);return o(s,"_invoke",function(r,n,o){var u,a,i,f=0,s=o||[],l=!1,v={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,r){return u=e,a=0,i=t,v.n=r,c}};function m(r,n){for(a=r,i=n,e=0;!l&&f&&!o&&e<s.length;e++){var o,u=s[e],m=v.p,p=u[2];r>3?(o=p===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=m&&((o=r<2&&m<u[1])?(a=0,v.v=n,v.n=u[1]):m<p&&(o=r<3||u[0]>n||n>p)&&(u[4]=r,u[5]=n,v.n=p,a=0))}if(o||r>1)return c;throw l=!0,n}return function(o,s,p){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&m(s,p),a=s,i=p;(e=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(v.n=-1),m(a,i)):v.n=i:v.v=i);try{if(f=2,u){if(a||(o="next"),e=u[o]){if(!(e=e.call(u,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=u.return)&&e.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((e=(l=v.n<0)?i:r.call(n,v))!==c)break}catch(e){u=t,a=1,i=e}finally{f=1}}return{value:e,done:l}}}(r,u,a),!0),s}var c={};function f(){}function s(){}function l(){}e=Object.getPrototypeOf;var v=[][u]?e(e([][u]())):(o(e={},u,function(){return this}),e),m=l.prototype=f.prototype=Object.create(v);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,o(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=l,o(m,"constructor",l),o(l,"constructor",s),s.displayName="GeneratorFunction",o(l,a,"GeneratorFunction"),o(m),o(m,a,"Generator"),o(m,u,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:p}})()}function o(t,e,r,n){var u=Object.defineProperty;try{u({},"",{})}catch(t){u=0}o=function(t,e,r,n){if(e)u?u(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var a=function(e,r){o(t,e,function(t){return this._invoke(e,r,t)})};a("next",0),a("throw",1),a("return",2)}},o(t,e,r,n)}function u(t,e,r,n,o,u,a){try{var i=t[u](a),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function i(t){u(a,n,o,i,c,"next",t)}function c(t){u(a,n,o,i,c,"throw",t)}i(void 0)})}}document.addEventListener("DOMContentLoaded",a(n().m(function t(){var o,u,i,c,f,s;return n().w(function(t){for(;;)switch(t.n){case 0:return o=document.getElementById("webdavUrl"),u=document.getElementById("webdavPath"),i=document.getElementById("webdavUser"),c=document.getElementById("webdavPass"),f=document.getElementById("webdavForm"),t.n=1,r("webdavSettings",{url:"",path:"",username:"",password:""});case 1:s=t.v,o.value=s.url||"",u.value=s.path||"",i.value=s.username||"",c.value=s.password||"",f.onsubmit=function(){var t=a(n().m(function t(r){var a;return n().w(function(t){for(;;)switch(t.n){case 0:return r.preventDefault(),a={url:o.value.trim(),path:u.value.trim(),username:i.value.trim(),password:c.value},t.n=1,e("webdavSettings",a);case 1:if(alert("WebDAV 设置已保存"),a.url){t.n=2;break}return alert("WebDAV URL 不能为空"),t.a(2);case 2:chrome.runtime.sendMessage({type:"webdav-test",settings:a},function(t){t.success?alert("WebDAV 连接成功！"):alert("WebDAV 连接失败: ".concat(t.status||""," ").concat(t.statusText||t.error))});case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}();case 2:return t.a(2)}},t)})))})();